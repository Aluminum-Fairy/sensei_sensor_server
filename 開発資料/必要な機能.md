# データの同期

## 検出ログ

### センサがホストから取得する
- ホストへ自分の持っている各センサーの最新時刻を送信して新しいデータがないか問い合わせる

    - センサー側 `syncDiscvLog.php`
        - レスポンスとして出てきたセンサーのログを挿入する関数
            - `public function inputDiscvLog($time, $sensorId, $userId)`
        - センサーが持っている最新の各センサーごとの検出ログを取得する関数
            - `public function getLastLogTime($sensorId,$for)`
    - ホスト側 `getDiscvLog.php`
        - 特定のセンサーID以外の特定の時刻以降のセンサーごとの最新の検出ログをホストDBから取得する関数

            - `public function getDiscvLogSetTime($sensorId, $time)`

                差分データを取得するために時刻を使う。
                自機を除くためにセンサーIDを使う

### センサーがホストへ送信する

- センサー側
    - センサーが持っているホストは持つデータとの差分データを取得する関数
    - ホストから自機の検出データの時刻を取得する関数

- サーバ側
    - センサーIDのホストDB上の最新の検出時刻を取得する`getLastLogTime.php`
        - センサーIDのホストDB上の最新の検出時刻を取得する関数
            - `public function getLastLogTime($sensorId,$for)`
    - センサーのログを挿入する
        - センサーのログを挿入する関数
            - `public function inputDiscvLog($time, $sensorId, $userId)`