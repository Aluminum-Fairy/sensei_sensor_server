# データの同期分離板

## 検出ログ

### センサがホストから取得する
- ホストへ自分の持っている各センサーの最新時刻を送信して新しいデータがないか問い合わせる
    - センサー側 `syncDiscvLog.php`
        - レスポンスとして出てきたセンサーのログを挿入する関数
            - `public function inputDiscvLog($time, $sensorId, $userId)`
        - センサーが持っている最新の各センサーごとの検出ログを取得する関数
            - `public function getLastLogTime($sensorId,$for)`
    - ホスト側 `getDiscvLog.php`
        - 特定のセンサーID以外の特定の時刻以降のセンサーごとの最新の検出ログをホストDBから取得する関数
            - `public function getDiscvLog($sensorId, $time,$for)`
                差分データを取得するために時刻を使う。
                自機を除くためにセンサーIDを使う

### センサーがホストへ送信する

- センサー側
    - センサーが持っているホストが持つデータとの差分データを取得する関数
        - `public function getDiscvLog($sensorId, $time,$for)`
    - ホストから自機の検出データの時刻を取得する関数
        - `public function getLastLogTime($sensorId,$for)`

- サーバ側
    - センサーIDのホストDB上の最新の検出時刻を取得する`getLastLogTime.php`
        - センサーIDのホストDB上の最新の検出時刻を取得する関数
            - `public function getLastLogTime($sensorId,$for)`
    - センサーのログを挿入する
        - センサーのログを挿入する関数
            - `public function inputDiscvLog($time, $sensorId, $userId)`